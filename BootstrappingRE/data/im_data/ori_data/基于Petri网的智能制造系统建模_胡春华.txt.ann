基于[@petri网#政策技术*]的[@智能制造系统#政策技术*]建模摘要:阐述了[@petri网#政策技术*]在[@智能制造系统#政策技术*]建模中的突出优点,对其进行了扩展,并与面向对象技术相结合形成了面向对象[@petri网#政策技术*](oopn)。
提出了利用oopn建立[@智能制造系统#政策技术*]结构模型、行为模型、控制决策模型和消息模型的方法。
通过利用oopn建立[@智能制造#政策技术*]中加工结点模型的实例,充分说明了面向对象[@petri网#政策技术*]的有效性和强大的建模能力,为[@智能制造系统#政策技术*]的设计、性能分析、运行状态监视提供了一条有效途径和强有力的工具,必将在制造领域得到广泛[@应用#政策技术*]和进一步的发展。
关键词:[@petri网#政策技术*];面向对象;[@智能制造系统#政策技术*];建模[@petri网#政策技术*]是一种图形化的建模工具,能精确、直观地描述事件之间的顺序、并发、同步等关系,是对离散事件[@动态#技术特点*]系统进行描述、建模和分析的强有力的工具。
[@petri网#政策技术*]具有精确的语义和严格的数学基础,不仅提供了对系统性能的定性分析方法,同时也提供了定量分析手段,因此[@petri网#政策技术*]在许多领域得到了深入地研究和广泛地[@应用#政策技术*]。
对[@智能制造系统#政策技术*]进行规划、设计、调度、控制、运行状态监控、故障诊断、系统维护、性能分析等都必须有相应的模型支持。
[@制造系统#政策技术*]中建模与仿真常用的有限状态机模型不能处理复杂性问题和[@分布式#技术特点*]问题,功能层次模型只能表示[@数据#政策技术*]流,不能表示控制流,而且对系统的描述不够精确[1]。
由于[@petri网#政策技术*]的突出优点,则为[@智能制造系统#政策技术*]建模提供了一个有效的工具。
本文将有色时间[@petri网#政策技术*]中的颜色元素进行面向对象的扩展,用以建立[@智能制造系统#政策技术*]的结构、行为方式和控制方式模型。
1[@智能制造系统#政策技术*]建模与[@petri网#政策技术*]在规划和设计阶段,主要决策是确定机床的类型和数量、物料传输设备的类型和数量、缓冲站的数量、托盘库的大小、夹具的数量、最合适的现场布局、刀库的容量,以及系统结构的选择、加工零件类型的选择、机床的组合、调度控制策略的选择等;在运行阶段,模型可以帮助预见增加或删除资源和零件的效果,在意外事件发生或外界环境变化时获得最优调度策略,避免死锁。
另外模型还可以帮助决定一些基本的设计方法[2],例如,是集中存储还是局部存储,是推进式生产还是牵引式生产等。
通过一个能真实反映[@制造系统#政策技术*]性能特征的模型可以使系统的设计者和操作者能更深入地了解系统,从而有助于设计更好的控制策略[3]。
[@petri网#政策技术*]在建模方面的优越性[4]主要体现在[@petri网#政策技术*]的高度抽象性,使它便于扩展,容易与其它技术结合。
[@petri网#政策技术*]和面向对象技术的结合,不仅能[@准确#技术特点*]地描述[@智能制造#政策技术*]过程的[@动态#技术特点*]特征,而且能容纳所有[@制造系统#政策技术*]的原始[@数据#政策技术*]、中间[@数据#政策技术*]和各种控制算法。
同时,[@petri网#政策技术*]的抽象性使得它在不同的[@应用#政策技术*]领域得到不同的解释,从而起着沟通不同领域的桥梁作用。
因此,[@petri网#政策技术*]特别适合于[@智能制造系统#政策技术*]这样一个复杂的多学科综合[@应用#政策技术*]系统模型的建立,例如将[@petri网#政策技术*]对制造过程描述方面的[@应用#政策技术*]与在知识表示方面的[@应用#政策技术*]综合起来,可以形成一个以[@petri网#政策技术*]为核心的[@制造系统#政策技术*]建模和性能分析的综合平台。
由于[@petri网#政策技术*]模型的上述特点及其点燃机制使得[@petri网#政策技术*]模型在[@智能制造系统#政策技术*]的设计、性能分析与评价、运行状态监视和故障诊断中都能发挥极大的作用。
因此,[@petri网#政策技术*]模型在[@制造系统#政策技术*]研究领域得到了广泛的[@应用#政策技术*][5]。
由于[@智能制造系统#政策技术*]体系结构日益呈现出分布性的特点,因此用[@petri网#政策技术*]可以很好地解决[@分布式#技术特点*]系统中的异步、并发、冲突等现象以及消息处理机制。
异步主要体现在模型的运行是由事件驱动而不是由时间驱动的,这可由[@petri网#政策技术*]的点燃规则保证;而顺序、并发、冲突等关系可以直接由[@petri网#政策技术*]的流关系体现(见图1)。
但[@petri网#政策技术*]并没有给出冲突消解的方法,因此,需要在[@petri网#政策技术*]模型上增加控制结点以消解冲突。
此外,选择关系也需要增加控制结点。
总之,[@petri网#政策技术*]能为[@智能制造系统#政策技术*]提供一种有效的建模手段和工具。
2面向对象[@petri网#政策技术*][@petri网#政策技术*]最突出的优点主要表现在事件驱动、图形表示和数学分析等方面,但模块性比较差;而o-o方法的最大优点是模块性好,但缺乏对控制逻辑的分析能力,以及对系统[@动态#技术特点*]行为的预见能力。
因此,将面向对象的方法与[@petri网#政策技术*]结合,突出二者在建模方面的优点,弥补彼此的缺点,可简化模型描述的规模,降低模型的复杂程度,增强模型的表达能力,形成面向对象[@petri网#政策技术*][5]。
(1)将面向对象技术与有色时间[@petri网#政策技术*]结合,以提高模型的描述能力有色时间[@petri网#政策技术*]的定义如下[6]:e=(p,t;f,c,i-,i+,m0,time)是有色时间网系统的充分必要条件如下:①n=(p,t;f)是一个基本网。
②c:p∪t→颜色集的幂集合;使得对所有p∈p,c(p)是p上所有可能的to[@ke#事业单位*]n色之集合,对所有t∈t,c(t)是t上所有可能的出现色之集合。
③i-和i+分别是p×t上的负函数和正函数;使得对所有(p,t)∈p×t,i-(p,t)∈[c(t)ms→c(p)ms]l,且i-(p,t)=0的充分必要条件是(p,t)f;i+(p,t)∈[c(t)ms→c(p)ms]l,且i+(p,t)=0的充分必要条件是:(p,t)f。
④m0称为e的初始标识,满足p∈p:m0(p)∈c(p)ms,即m0(p)是p的to[@ke#事业单位*]n集合上的多重集。
⑤time:t×c(t)→r,其中r为非负实数集合。
从上面的定义可以看出有色时间网是有色网与时间网的叠加。
有色时间网中每一个变迁所关联的时间是该变迁上颜色值的函数,同一个变迁在不同的出现色中时间值是不同的。
(2)将组成系统的客观实体用对象来描述,然后用有色时间[@petri网#政策技术*]来描述每一个对象对象内的place表示状态,对象间的place表示消息。
(3)用对象来描述[@petri网#政策技术*]的各个组成部分包括库所(place)、变迁(transition)、to[@ke#事业单位*]n和有向弧(arc)等。
这种结合的主要目的是方便模型的[@计算机#应用领域*]实现,可以用面向对象的方法来建立[@petri网#政策技术*]模型的构件库。
有色时间[@petri网#政策技术*]通过赋予每个to[@ke#事业单位*]n不同的颜色来区分具有不同个体特征的to[@ke#事业单位*]n;通过有效变迁的输入库所中不同to[@ke#事业单位*]n颜色的组合构成变迁的不同颜色,用以区分由不同实体所参与的同一类型的活动;每个变迁点燃后有一个时间延迟,以此表示完成活动所需的时间。
引入时间的概念使得对活动之间的并发、冲突等现象的描述更为[@准确#技术特点*],增加颜色的概念使多个相似的结点合并为同一个结点,从而达到简化模型的目的。
然而,颜色仍只是个比较抽象的概念,只能标识出区别,不能说明区别的内容。
为了进一步增强模型的描述能力,将具有相似结构的库所、变迁、to[@ke#事业单位*]n和有向弧等分别用对象类表示,具有不同属性的库所、变迁、to[@ke#事业单位*]n和有向弧分别成为各个类的对象,不同的对象或不同的对象组合体现不同的颜色。
在有色时间[@petri网#政策技术*]中,to[@ke#事业单位*]n的颜色很重要,扩展后的[@petri网#政策技术*]中,to[@ke#事业单位*]n的对象分类和属性定义将直接影响模型对实际系统组成实体的描述能力。
这种to[@ke#事业单位*]n的属性定义包括2部分:①静态属性,记为sa;②[@动态#技术特点*]属性,记为da。
静态属性记录了系统配置上的固有信息,[@动态#技术特点*]属性记录了系统运行的中间信息,to[@ke#事业单位*]n的颜色是静态属性的函数:cto[@ke#事业单位*]n=f(sa)。
基于上面3点,面向对象[@petri网#政策技术*]的形式化定义如下:e=(o,r)是面向对象[@petri网#政策技术*]系统,其中,o是客观对象的集合,r是对象间关系的集合;o={o1,o2,…,ok},ok是物理对象,ok=(pk,tk;fk,ck,i-k,i+k,m0k,timek),r={r1,r2,…,rk},rk是ok的消息集合,r=(ri,ro),ri={msgi1,msgi2,…,msgix},ro={msgo1,msgo2,…,msgoy},ri是输入消息的集合,ro是输出消息的集合。
3[@智能制造系统#政策技术*]的建模过程3.1[@智能制造系统#政策技术*]的建模[@智能制造系统#政策技术*]的建模由底向上可分为4个层次。
(1)结构模型从系统建模的角度出发,[@制造系统#政策技术*]分为资源元素和过程元素:①资源元素又分为设备资源元素和信息资源元素,前者包括各种机床、工具;后者包括各个cad、capp等为过程元素提供设计[@数据#政策技术*]、工艺流程和加工[@数据#政策技术*]等伴随信息的[@软件#政策技术*]。
②过程元素指的是被加工零件的状态。
零件从毛坯到成品的过程可以看作是过程元素经过一系列资源元素的[@服务#政策技术*],不断改变状态,最终达到所需状态的过程。
[@制造系统#政策技术*]的结构模型主要描述设备资源元素和过程元素的属性、数量和相互关系等。
[@制造系统#政策技术*]的结构是制造过程运行的基础,可用一个对象模型来表示(见图2),每一种设备资源元素是一个对象类,过程元素也是一个独立的对象类。
对象的属性有4种取值类型,分别用i、f、s、p表示整型、实型、字符型和指针型,前缀s表示静态属性,前缀d表示[@动态#技术特点*]属性,静态属性在模型的运行过程中只能读,不能写,[@动态#技术特点*]属性记录该属性的当前值,可读写。
在面向对象[@petri网#政策技术*]中,一个对象实际上是一个[@petri网#政策技术*]的子系统,因此除了对象的属性以外,每个对象模型还包括该对象所包含的库所、变迁、接收消息和发送消息等。
这些不属于[@制造系统#政策技术*]的结构成员,但属于对象模型的一个部分,在模型实现时需要考虑。
(2)行为模型制造过程状态的变化是由资源元素和过程元素状态的变化所决定的。
设备资源元素有3种有效状态:空闲状态、忙状态和故障状态;而过程元素,根据它所处的不同处理阶段呈现出各种不同的状态。
一般说来,加工过程中的零件可以处于装夹、加工、运输、清洗、测量等不同的工序阶段,每个工序可能要经过等待、装载、处理、卸载和完毕等过程,而零件由于其工艺路线的不同,在这些状态之间变化的路径也是不同的。
资源元素和过程元素之间的这种关系可用[@petri网#政策技术*]中的库所、变迁和流关系描述出来。
库所表示所有的状态,变迁表示所有的活动,流关系表示状态与活动之间的约束关系。
这样,制造过程状态的变化对应一个基于[@petri网#政策技术*]的行为模型。
用[@petri网#政策技术*]模型描述系统组成元素的各种状态和对应的促使状态改变的活动后,离散制造过程中各种活动的顺序、并发和冲突等关系可直接从图形上容易识别出来。
并发关系的活动在网中表现为没有公共外延(输入结点和输出结点),冲突关系的活动在图上表现为共享相同的输入,顺序关系的活动用网中的流关系[@自动#技术特点*]生成约束。
(3)控制决策模型由于制造过程中的各个活动对设备资源的利用在时间上是随机的,而且加工任务也是[@动态#技术特点*]变化的,使得各个活动在设备资源元素的利用上存在着竞争,在过程元素上存在着选择。
这需要由系统调度来解决,而调度必须建立系统的控制决策模型。
控制决策模型是通过扩展[@petri网#政策技术*]模型的启动规则而建立的,相当于在每一个变迁结点的输入位置上隐含地增加一个控制结点,使得变迁的点燃不仅取决于输入信息,还取决于控制信息,每个控制结点都连到相应的决策模块上,当变迁的输入满足点燃条件时,就触发相应决策过程的执行。
每一个资源元素都是一个“资源[@服务器#政策技术*]”,[@服务器#政策技术*]存在一个[@服务#政策技术*]队列和一个等待队列,变迁向其输入库所中的资源[@服务器#政策技术*]请求[@服务#政策技术*],资源[@服务器#政策技术*]则根据当时它的2个队列的情况,按适当的规则决定是否响应请求,只有当变迁的每个输入请求都得到响应时,这个活动才有发生权。
对于过程元素,存在选择零件进入系统、选择零件进行某一工序的处理、选择零件的加工路线和选择零件退出系统4种类型的决策。
这4类决策过程分别在4个决策控制器中运行,控制器分别根据当时的情况和要求从规则库中选取诸如随机选择规则、最短处理时间规则、最短交货期规则和先到先[@服务#政策技术*]规则等进行计算与决策。
每一个活动先请求过程元素[@服务器#政策技术*]的响应,然后根据所选零件的属性,再请求相应资源[@服务器#政策技术*]的响应。
(4)消息模型消息是[@智能制造系统#政策技术*]中不同对象互相联系的惟一途径。
[@智能制造系统#政策技术*]中的消息机制用一般[@petri网#政策技术*]就可以表示,消息用[@petri网#政策技术*]中的库所来表示,消息处理活动用[@petri网#政策技术*]中的变迁表示,可以没有颜色和时间的概念,但仍然有控制结点。
[@智能制造系统#政策技术*]中的消息一般有2类:①纯粹的[@网络#政策技术*]消息,对象接受到这类消息时往往伴随着一系列的消息处理活动,如状态查询、任务通知、招标和投标等,用nmp(networkmessageplace)表示;②相关对象的状态消息,是状态转换的通知,用smp(statemessageplace)表示。
对于每一个对象来讲,它所能发送和接受的nmp内容和格式是确定的,但发送和接收的对象是不确定的,因此,各个对象的nmp模型之间是独立的,这样,可以单独分析各对象的nmp。
3.2[@智能制造系统#政策技术*]的建模过程[@智能制造系统#政策技术*]的建模过程是一个由底向上、由静向动的过程,可以分为以下几个步骤:(1)确定对象的界限在[@智能制造#政策技术*]的[@网络#政策技术*]环境中,一个结点就是一个完整的对象,可以用[@petri网#政策技术*]描述为一个对象子网(包含[@网络#政策技术*]消息模型)。
同时,一个结点中可能包含了若干个物理对象,因此这样的一个对象子网又可以划分为若干个小的对象子网,但这第二层的对象子网没有[@网络#政策技术*]消息库所,只包含一些状态消息库所。
一个对象的状态消息库所实际上是与之相关的其它对象的状态库所,而这正是体现了[@制造系统#政策技术*]的物料流和信息流。
为简化模型,可以不用在图上表示状态消息库所。
(2)定义对象子网中的to[@ke#事业单位*]n类型和属性(静态属性或[@动态#技术特点*]属性)。
(3)定义每个对象所包含的库所和变迁,以及库所与变迁的输入输出关系,并用图形表示出来在[@制造系统#政策技术*]中除了过程元素(工件)的状态比较多外,设备资源元素一般都只有“忙”、“闲”、“故障”3种状态。
(4)考察每个对象子网中的变迁点燃条件在有冲突、选择的地方加入控制结点,并规定点燃规则。
(5)建立对象的[@网络#政策技术*]消息模型定义输入输出消息,消息模型实际上是体现结点与外部联系的方式,消息模型与结构行为模型之间的相互关系往往通过[@数据#政策技术*]库或[@数据#政策技术*]文件的方式实现。
4面向对象[@petri网#政策技术*]模型示例[@智能制造系统#政策技术*]是[@分布式#技术特点*][@自治#技术特点*]结构,各[@自治#技术特点*]的子系统通过消息传递相互交流信息。
由于[@智能制造#政策技术*][@网络#政策技术*]上的各[@自治#技术特点*]子系统的功能和规模可大可小,可以是一单独的设备,也可以是一个制造单元或一个制造工厂。
图3表示了包含4个对象的加工单元[@petri网#政策技术*]模型。
图4表示了[@智能制造#政策技术*][@网络#政策技术*]上一个加工结点的面向对象[@petri网#政策技术*]模型。
图3中描述了[@制造系统#政策技术*]中的4个对象:工件(part)、装载[@机器人#政策技术*](robot)、机床(machine)、刀具(tool)。
(1)对象partp1:工件在缓冲站内;p2:工件在机床上等待加工;p3:工件加工完毕。
(2)对象robotrp1:[@机器人#政策技术*]空闲;rt1:将工件装载到机床上;rt2:将工件从机床上卸载。
(3)对象machinemp1:机床上没有工件;mp2:机床上有工件;mp3:机床上没有刀具;mp4:机床上有刀具;mt1:安装刀具;mt2:切削;mt3:拆卸刀具。
(4)对象tooltp1:刀具空闲;tp2:刀具忙。
控制结点rule1控制选择哪个工件在哪台机床上加工,rule2控制选择哪个刀具。
图4表示了[@智能制造系统#政策技术*]中一个加工结点的面向对象[@petri网#政策技术*]模型,其中横线上半部分表示结点的对外合作部分,下半部分表示结点的执行部分。
图中符号和文字说明如下:(1)变迁结点defaulthandle:缺省消息处理;not-select:不参加新任务投标;select:参加投标;db-query:[@数据#政策技术*]库查询;notsign:拒绝签合同;sign:签合同;schedule:调度;command:发出加工命令;dataprepare:加工[@数据#政策技术*]准备;load工件上装;machining:加工;unload:工件下装;mountag[@ai#政策技术*]n:重新装夹;enterwarehouse:进入仓库;report:报告状态。
(2)[@网络#政策技术*]消息结点othermessages:本结点不能处理的消息;messagereceived:消息收到;task-inform:新任务通知;abandon-task:放弃任务投标;status-query:状态查询;status-report:状态报告;contract-inform:签约通知;refuse-contract:拒绝签合同;sign-contract:签订合同;contractend:合同终止。
(3)控制决策结点task-type-select:任务选择决策;task-queue-check:任务队列检查,如果任务队列太长则放弃投标;schedulerule:任务调度;toolselectrule:选择刀具;machineselectrule:选择加工机床;processplan:由工艺规划控制工件流动。
(4)状态消息结点toolidle:刀具空闲;partready:工件准备好;w[@ai#政策技术*]tformachining:工件等待加工;machined:加工完成;unloaded:工件已经离开机床。
(5)内部状态结点taskpool:任务池;task:加工任务;job:具体加工操作;dataready:加工[@数据#政策技术*]准备好;machineidle:机床空闲;machinebusy:机床忙;taskfinished:任务完成。
