基于自适应多目标果蝇算法的3d-u型智能制造单元设施布置摘要:目前离散型智能工厂已成为智能制造的研究热点之一,智能制造单元作为其重要组成部分也受到广泛关注。
针对加工产品种类繁多,设施量大的智能制造单元布置,提出一种立体u型(3d-u)智能制造单元,建立了物流搬运距离最短和单元高度最低的双目标函数,并明确了约束条件。
在已有算法研究的基础上,提出了自适应多目标果蝇算法求解3d-u型智能制造单元的设施布置问题,将快速非支配排序用于多目标的食物浓度计算,设计了自适应的嗅觉搜索和视觉搜索,并对飞行策略采用摄动操作来保证种群的多样性。
通过算例分析表明自适应多目标果蝇算法在求解3d-u型智能制造单元的设施布置问题时,在种群多样性、寻优能力、稳定性等方面表现优异。
关键词:智能制造单元;立体u型制造;自适应果蝇算法;多目标果蝇算法;智能工厂1问题的提出智能制造单元(intelligentmanufacturingcell,imc)由机器人制造单元发展而来,是离散型智能工厂(job-shop)的重要组成部分,智能工厂将小批量、多品种的加工任务分配给各个智能制造单元,智能制造单元根据本单元的自动加工设备、搬运机器人、智能控制系统等完成被分配的加工任务[1]。
智能制造单元是多搬运机器人、多智能设备的单元,可以同时对多品种、小批量的产品进行多道工序的加工,也可以独立完成某一道工序的加工,具有较强的生产灵活性[2]。
它主要由智能物流系统、智能加工设备和中央控制系统3部分组成,加工设备与搬运机器人将实时信息反馈给中央信息传输控制器,经过计算,中央控制系统给机器人下达加工命令。
平面u型智能制造单元(ushapeintelligentmanufacturingcell,uimc)的布置如图1所示,智能制造单元信息传递与反馈流程如图2所示。
图2中:p1表示待机状态,p2表示加工/搬运状态,im表示接收信息,om表示输出信息,t1表示准备就绪,t2表示作业完成,g表现处理信息排序。
目前,针对智能制造单元的研究主要集中在单元系统建模和求解算法。
商滔[2]提出了智能单元制造系统(intelligentcellularmanufacturingsystem,icms),指出icms布置的直线型、u型、曲线型和环型4种形式,其中包括每个加工岛的输出/输出缓冲区、自动化加工设备、搬运机器人、智能调度控制系统、辅助设施等;yang等[3]提出了job-shop的柔性机器人制造单元,指出机器人制造单元包含单机型—单机器人制造单元、多机型—单机器人制造单元和多机型—多机器人制造单元,并对多机器人调度进行建模分析,结果表明机器人制造单元的效率、成本、和柔性效果显著;holubek等[4]对智能制造单元的搬运机器人路径规划建模及求解分析,分析了物流和设施之间的关系及影响;毕辉等[5]对机器人制造单元的可重构的控制系统进行了研究,提出适应动态重构的通用vmd组件模型,并验证了其有效性;ali等[6]研究了动态情况下的智能制造单元调度模型,使用遗传算法进行了模型求解;indira等[7]提出了不确定订单下的智能制造单元调度分析;刘琼等[8]、braglia等[9]、wang等[10]研究了遗传算法、nsga-ⅱ、标准果蝇算法和多目标果蝇算法在布局中的求解优劣,结果表明果蝇算法和nsga-ⅱ混合求解多目标问题优于遗传算法和nsga-ⅱ。
综合国内外研究,针对智能制造单元设施布局的研究较少,而针对立体智能制造单元的设施布置研究几乎没有。
因此,在前人研究的基础上,本文提出一种立体u型智能制造单元(three-dimensionalushapeintelligentmanufacturingcell,3duimc)设施布置问题,并采用改进的自适应多目标果蝇算法(self-adaptingmulti-objectivefruitflyoptimizationalgorithm,smfoa)对模型进行求解。
2问题描述随着“工业4.0”、“中国制造2025”战略的实施,全球掀起了智能制造的研究热点,在欧美发达国家、中国部分制造企业已经实现了无人化工厂的应用。
在未来的制造制造业中,智能制造将取代劳动力密集型生产,成为未来制造业的主力[11]。
智能物流使在制品精确到达车间内任何区域,智能设备实现无人化作业,在整个智能制造系统中,设施、在制品等不再受空间限制,车间内的立体空间都是生产设施布置的范围,例如hu等[12],chang等[13]提出的智能制造车间的物流系统。
因此,3d-uimc的实现具备了一定的前提条件。
当工厂规划用地面积有限、土地价格昂贵,或因产能扩大、增加设备,需要布置紧致生产线时,uimc的平面布置已不能满足要求。
伴随设备小型化、轻质化、可移动性越来越强的发展趋势,以及全自动化的智能加工设备和智能物流等智能制造环境,3d-uimc的设计突显其必要性。
因此,本文在uimc布置的基础上,提出了3d-uimc的布置,以物料搬运距最小和单元高度最低的双目标进行规划设计。
如图3所示为杭州某视频监控企业的摄像机全自动化组装生产线,其中设备分两层布置,同层之间的物流传输采用辊子传送,在3d-uimc的两端安装两台升降机,实现不同层之间的物流传输。
为便于学术研究,假设加工产品的传送路径为每台设备的中心点,加工产品的同层传送在同一水平线上,且设备的形状为长方体(包含实际设备的最小长方体)。
基于以上假设抽象出如图3所示的3d-uimc,如图4所示。
将图4中xoz1平面、xoz2平面绕yoz平面旋转,使两平面与yoz在同一平面上,旋转结果如图5所示。
图5中的矩形尺寸(li,wi)为长方体投影到设备所在平面的尺寸。
图4中的3d-uimc布置中的物流传递等同于图5中物流传递,因此建立图5的直角坐标系,其中xoz1平面在坐标系的第二象限,yoz和xoz2为第一象限。
以图5的坐标系为基础构建3d-uimc数学模型,例如设备1到设备9的搬运距离为1到b的距离、b到d的距离和d到9距离总和,单元高度为l3+l9+hg。
3数学模型3.1符号说明d为单元的物料搬运总量;h为单元的高度;i,j为设备编号;m为设备总数量;mxoz1r,myozr,mxoz2r分别为第r层的设备在xoz1平面、yoz平面和xoz2平面内的数量;p为加工的某一种产品;p为加工的产品种类总数;vp为p产品待加工的总数量;hp为p产品一次搬运的数量;npijp为产品加工工艺在设备i与设备j之间的移动次数;xi,yi,zi为设施i的中心坐标;ceil[]为向上取整;li,wi为设备i在各平面的投射尺寸;dg为设备同层之间的最小间距限制;hg为不同层设备之间的最小间距限制;cd为单元的长度,如图4所示;kd为单元的宽度,如图4所示;r为单元的设备总层数;d0ij为产品在同一层设备之间的搬运距离;d1ij为产品从低层到高层的设备之间的搬运距离;d2ij为产品从高层到底层的设备之间的搬运距离;f0ij为0-1变量,若设备i与设备j在同一层,则为1,否则为0;f1ij为0-1变量,若设备i与设备j不在同一层并且设备i在低层,设备j在高层,则为1,否则为0;f2ij为0-1变量,若设备i与设备j不在同一层并且设备i在高层,设备j在低层,则为1,否则为0;δgij为设备之间相隔的设备数量(如,相邻为1,中间有一个设备间隔为2);δrij为设备之间相隔的层数(如,相邻为1,中间有一层设备间隔为2);fxoz1ij为0-1变量,如果设施i和设施j的在xoy1面内,则为1,否则为0;fxoz2ij为0-1变量,如果设施i和设施j的在xoy2面内,则为1,否则为0;fyozij为0-1变量,如果设施i和设施j的在yoz面内,则为1,否则为0。
3.2目标函数3.2.1物料搬运总量最小目标函数mind=σmi=1σmj=1σpp=1npij×ceil[vp/hp]×(d0ij+d1ij+d2ij)。
(1)d0ij=|xi-xj|×f0ij;(2)d1ij=((|xi-(kd+cd)|+|xj-(kd+cd)|)+|zi-zj|)f1ij;(3)d2ij=((|-cd-xi|+|-cd-xj|)+|zi-zj|)×f2ij;(4)f0ij+f1ij+f2ij=1。
(5)其中:式(1)表示智能制造单元的所有产品加工过程中物料搬运总量最小,ceil[vp/hp]表示产品p的加工量除以搬运批量向上取整数,若物流设备只能单个搬运,则ceil[vp/hp]等于加工量vp;式(2)表示产品在同一层设备之间的搬运距离;式(3)表示产品从低层到高层的设备之间的搬运距离;式(4)表示产品从高层到底层的设备之间的搬运距离;式(5)表示设备i与设备j之间的位置关系只能选择一种。
3.2.2总高度最低目标函数minh=σrr=1{max{li×f0ij,lj×f0ij}}+(r-1)×hg。
(6)s.t.|xi-xj|≥wi+wj(2+δgij×dg)×f0ij;(7)|zi-zj|≥li+lj(2+δrijhg)·(1-f0ij);(8)σmi=1wi+(m-1)×dg>2×cd+kd;(9)a=(σmxoz1ri=1wi+(mxoz1r-1)×dg)×fxoz1ij×f0ij;(10)b=(σmyozri=1wi+(myozr-1)×dg)fyozij×f0ij;(11)c=(σmxoz2ri=1wi+(mxoz2r-1)×dg)fxoz2ij×f0ij;(12)a+b+c≤2×cd+kd;(13)a≤cd;(14)b≤kd;(15)c≤cd;(16)fxoz1ij×fxoz2ij=0;(17)fxoz1ij×fyozij=0;(18)fxoz2ij×fyozij=0。
(19)其中:式(6)为目标函数,{li×f0ij,lj×f0ij}表示同层的设备高度集合,(r-1)×hg表示高度最小距离限制总和;式(7)表示设备i和设备j在同一层时,x轴方向不重叠的约束,其中δgij表示设备之间相相隔的设备数量(如相邻为1,中间有一个设备间隔为2),δgij×dg表示同层设备之间的间隔总距离限制;式(8)表示设备i和设备j在不同层时,z轴方向不重叠的约束;式(9)表示所有设备布置的层数大于1;式(13)表示同一层设备换行尺寸限制;式(14)表示同一层设备中的xoz1平面内的尺寸限制;式(15)表示同一层设备中的yoz平面内的尺寸限制;式(16)表示同一层设备中的xoz2平面内的尺寸限制;式(17)~式(19)表示设备i和设备j如果在同一平面,则只能选择三平面之一。
4自适应多目标果蝇优化算法果蝇优化算法(fruitflyoptimizationalgorithm,foa)由台湾学者潘文超于2011年提出,是模拟果蝇寻找食物的方法进行最优解的搜索。
首先果蝇种群中的个体利用嗅觉器官搜索周围食物,并向周围的果蝇发出食物气味信息;当每个果蝇通过比较其他果蝇的食物气味浓度后,通过视觉器官搜索食物气味浓度最高的位置,并飞向该位置;最终通过迭代演化找到整个区域食物气味浓度最高的位置[14]。
标准foa的果蝇进行固定半径的局部搜索和全局协助机制,当果蝇的位置范围(locationrange,lr)非常大时,标准foa很容易陷入局部最优解,因此很多学者进行了改进。
yuan等[15]将局部搜索半径改为当前迭代次数的变化函数进行自适应;shan等[16]将全局协助机制与搜索半径的权重系数进行自适应;wang等[14]提出了果蝇多种群同时飞行搜索来避免陷入局部最优解。
目前,大多数学者对果蝇算法的研究集中在连续问题的算法改进,针对离散型问题的研究较少,应用于设施布局的研究更少,只有文献[8]将果蝇优化算法与nsga-ⅱ的非支配排序进行结合,以解决低碳车间的布局和调度问题,最终仿真验证了多目标果蝇算法(multi-objectivefruitflyoptimizationalgorithm,mfoa)比ga、nsga-ⅱ的效果更好。
本文提出的3d-uimc的布置问题是一个多目标大规模离散问题,为求解该问题,foa的固定局部搜索半径和全局协助机制极容易陷入局部最优解,因此在mfoa的基础上提出了smfoa来求解3d-uimc的设施布置问题。
smfoa将果蝇种群中的局部搜索半径(searchradiug,sr)和全局搜索的飞行距离(flightrange,fr)进行自适应的联动,并对多目标的候选解进行非支配排序,通过视觉搜索后,按自适应的fr飞向非支配排序最优的个体位置,为了进一步跳出局部最优解,引入摄动操作,从而增加种群多样性。
smfoa的果蝇搜寻如图6所示,果蝇种群为fruitfly1,fruitfly2,fruitfly3,fruitfly4,这4个个体按sr半径进行局部搜索(嗅觉搜索),对搜索结果进行非支配排序得出fruitfly4为目前浓度最高的食物(视觉搜索),一部分个体向fruitfly4方向飞去,再次进行嗅觉局部搜索,此时嗅觉搜索半径会随着个体与最优个体的距离而减小为sr范围,这样不断迭代下去。
为了保证种群的多样性,需要一部分个体对进行摄动,如fruitfly3,它没有飞向fruitfly4,而是随机飞向了其他位置。
smfoa的流程图如图7所示。
4.1编码3d-uimc布置需要对设施的顺序编码,编码的顺序为底层从左至右,上一层从右至左,以此类推的“w”型编码顺序。
例如11台设施在3d-uimc中的某一个编码为“[1,2,3,4,5,6,7,8,9,10,11]”,如图5所示,前5位表示设施在最底层从左至右的5台设备,后6位表示第二层从右至左的6台设备。
编码后随机生成初始种群。
4.2自适应的嗅觉搜索标准foa主要应用于连续问题的搜索,通过果蝇自身位置半径进行嗅觉搜索,其中文献[8]引入了遗传算法的交叉变异进行嗅觉搜索。
本文在前人的基础上提出自适应的嗅觉,自适应的嗅觉搜索是个体的单个基因位进行交换产生领域个体,自适应的sr的参数表示交换的次数,且sr是一个动态的值。
假设sr=2时,染色体随机产生两对基因位进行交换,如图8所示。
若产生的新个体优于原始个体,则新个体就替换原始个体,更新局部果蝇个体。
4.3自适应的视觉搜索自适应的视觉搜索加入摄动的全局协助机制,一部分果蝇向最优个体方向飞去,同时一部分果蝇随机飞行,保证全局搜索的多样性和稳定性。
4.3.1食物浓度值计算(适应值)对于多目标果蝇优化算法,大多数学者还是采用去量纲加权转换为单目标优化问题为主。
deb等[17]已经证明多目标加权后转换为单目标问题的优化方法,会遗漏大量的优秀个体,因此本文将nsga-ⅱ中的快速非支配排序理论引入到多目标果蝇优化算法。
快速非支配排序进行食物浓度值的多目标排序,等级越低,拥挤度越高的排序越靠前,然后选择最靠前的果蝇作为当前最优果蝇位置。
假设种群大小为p,计算每个个体p的被支配个数np和该个体支配的个体的集合sp两个参数,其伪代码如下所示[17]:(1)计算出种群中每个个体的两个参数np和sp;(2)将种群中参数np=0的个体的结合放入f1中;(3)遍历整个种群进行非支配排序for个体i∈f1;for个体l∈s1;nl=nl-1;(该步骤即消除pareto等级1对其余个体的支配,相当于将pareto等级1的个体从集合中删除)ifnl=0将个体l加入集合f2endendend上面得到pareto等级为2的个体的集合f2,对集合f2中的个体继续重复步骤(3),依此类推,直到种群等级被全部划分。
每一等级对其赋值,等级越小,赋值越大,代表等级越小的分级越容易被选中进入下一代。
4.3.2飞行策略针对连续性的问题优化,飞行策略根据固定的飞行距离飞向最优个体,然而对于离散问题不能采用标准foa的飞行策略。
对于离散的问题优化,郑晓龙等[18]采用插入的方法将连续的foa转换为离散的车间调度问题,本文也采用插入的飞行方法,但为了保证种群多样性和收敛的稳定性,提出了自适应的动态飞行策略,对部分果蝇进行摄动操作。
自适应飞行策略中一部分果蝇根据自适应的概率per决定随机搜索或者诱导搜索,其中非支配排序越靠前的果蝇诱导搜索概率越大,排序靠后的果蝇随机搜索概率越大。
随机搜索是根据自适应的搜索半径fr2进行飞行,如图9所示,随机摘取fr2=3长度的原始果蝇连续基因,随机重新排序后插入原始果蝇,得到新的果蝇个体。
最优个体诱导搜索根据自适应半径fr1飞行,如图10所示,随机摘取fr1=3长度的最优果蝇连续基因,替换原始果蝇同位置的基因,得到新的果蝇个体。
4.4自适应参数设计4.4.1种群摄动操作参数(a_per,r_per)种群摄动主要是保证种群的多样性,从而避免大规模求解时陷入局部最优解。
本文的摄动操作既要保持收敛的稳定性,也要保持种群的多样性,因此,参数设计如下:a_per=p-st(i)(p)·gmax-gen_p(g)max,r_per=1-a_per烅烄烆。
(20)式中:a_per为果蝇诱导飞行的概率;r_per为果蝇随机飞行的概率;p为种群数量;st(i)为种群(排除最优果蝇)非支配排序的等级;p-st(i)p为排序越靠前诱导飞行的概率越大,越靠后随机飞行的概率越大;gmax为最大迭代次数;gen_p为当前最优解未更新的迭代次数,当种群最优解更新后gen_p=1,再次循环;gmax-gengmax表示迭代次数越大,值越小。
综上所述,诱导飞行概率a_per随着非支配排序越靠前,迭代次数越小,值越大;随机飞行概率r_per随着非支配排序越靠后,迭代次数越大,值越大。
4.4.2嗅觉搜索半径(sr)和视觉搜索飞行距离(lr)随机飞行的果蝇飞行半径随机操作,嗅觉搜索半径采用固定值。
诱导飞行的果蝇的飞行lr和sr采用自适应操作。
当其他果蝇与最优果蝇的距离小于m_△cn时,其他果蝇采用lr=m_l、sr=m_s较小的飞行距离和搜索半径;当其他果蝇与最优果蝇的距离大于s_△cn时,其他果蝇采用lr=s_l;sr=s_s较大的飞行距离和搜索半径;当其他果蝇与最优果蝇的距离在[m_△cn,s_△cn]之间时,其他果蝇采用lr=[m_l,s_l]、sr=[m_s,s_s]之间的随机距离为飞行距离和搜索半径,伪代码如下所示:△cn=cni-cno%cno表示种群最优果蝇的浓度信息,cni表示其他果蝇浓度信息;fori=2:p%非支配排序第二等级后的所有果蝇forn=1:n%多目标的所有目标维度if△cn≤m_△cn%该果蝇与最优果蝇浓度差小于等于固定值时lr=m_l;sr=m_selseif△cn≥s_△cn%该果蝇与最优果蝇浓度差大于等于固定值时lr=s_l;sr=s_selselr=randint(1,1,[m_l,s_l]);%随机产生m_l,s_l之间的整数;sr=randint(1,1,[m_s,s_s]);%随机产生m_s,s_s之间的整数;endendendend5算例5.1算例简介某3d-uimc的三平面宽度(kd,cd)为4.5m,设备同层之间最小间距限制(dg)为0.3m,设备不同层之间最小间距限制(hg)为0.3m,需要布置30台设备,其设备尺寸为l,w,如表1所示。
加工产品14种,其工艺路径、加工批量和搬运批量如表2所示。
5.2算法验证分析本文采用matlab2014b作为仿真平台,windows10为运行环境,其中参数如表3所示。
初试随机生存50个pareto解集,通过smfoa迭代和mfoa迭代运算。
smfoa算法随着迭代次数增加,若当前最优解未更新,随机飞行的果蝇概率越大;当其他果蝇与最优果蝇位置越近时,飞行距离和嗅觉搜索半径越小,相反越大。
mfoa全部采用lr=8,sr=16固定步长进行500代迭代运算[8,18]。
每代运行pareto解集中非支配排序第一的果蝇的物流搬运距离迭代如图11所示,3d-uimc的高度如图12所示。
图11中,smfoa比mfoa更快地搜索到局部最优解,并在100~150代之间跳出局部最优解,搜索出更优的解,smfoa的寻优过程和寻优结果优于mfoa;图12中,smfoa的寻优过程和寻优结果也优于mfoa。
smfoa、mfoa在500代迭代过程中产生的果蝇种群如图13和图14所示。
在最优果蝇未更新时,种群中随机飞行的果蝇概率越大,使得在迭代过程中smfoa比mfoa具有更多样性的种群,有利于跳出局部最优解。
综上所述,在求解3d-uimc中的设施制造问题时,smfoa比mfoa更容易跳出局部最优解,种群多样性更强,寻优结果更理想。
5.3仿真结果分析smfoa仿真通过非支配排序的pareto解集如表4所示,mfoa仿真通过非支配排序的pareto解集如表5所示。
smfoa最优解为[3,7,10,15,11,2,24,5,8,4,19,26,18,23,12,1,29,16,28,25,6,9,13,30,14,27,22,21,17,20],物料搬运距离为2490.4,高度为3.8m;mfoa满意解为[30,16,29,11,2,24,10,19,8,6,7,13,18,3,12,15,1,9,23,5,28,25,26,20,14,27,22,21,17,4],物流搬运距离为2508.0m,高度为3.9m。
在物料搬运距离方面,smfoa最优解比mfoa最优解的搬运距离更短;在高度方面smfoa的最优解也优于mfoa,因此smfoa在求解3d-uimc布置方面具有较强的有效性。
smfoa的最优解解码为3d-uimc布置,如图15所示。
6结束语本文以智能制造单元的设施布局为研究对象,首次提出了立体u型智能制造单元,构建了单元物料搬运量最小和高度最低的双目标函数,并明确了目标函数的约束条件,通过算例验证了模型的有效性。
针对模型的求解,在多目标果蝇算法的基础上,设计了自适应多目标果蝇算法,其中将快速非支配排序用于多目标的食物浓度计算,自适应嗅觉搜索半径和视觉搜索半径与最优解的果蝇位置实现联动,避免重复无效搜索,自适应飞行策略采用与目前最优果蝇是否更新的迭代次数联动,保证了种群多样性,从而避免陷入局部最优解。
结果表明,自适应的多目标果蝇算法在求解立体u型智能制造单元设施布置问题中的种群多样性、寻优能力、稳定性明显优于多目标果蝇算法。
随着智能制造的发展,车间立体布局是未来趋势,布置的设备数量更加巨大,并且目标数量众多,这给求解布局带来了一定难度。
本文首次尝试改进的smfoa求解立体u型智能制造单元的双目标问题,并验证了算法的优越性,但是对于更大规模、更多目标的设备布局问题还有待进一步研究与完善。
