面向智能制造的工业机器人健康评估方法摘要:以智能制造领域中最具有代表性的设备——工业机器人——为研究对象,针对其精度退化及设备故障问题,研究了工业机器人健康评估问题.首先,对工业机器人核心部件进行了失效模式及影响分析,并对现有工业机器人健康评估方法进行了综述.其次,提出了基于边-云协同和深度学习的工业机器人健康评估框架.在边缘层应用基于群组聚类和对等比较的方法进行异常检测,快速识别出发生异常的设备;在云端借助故障预测与健康管理技术以及人工智能算法对发生异常的设备进行深度健康评估.最后,对基于深度学习的工业机器人健康评估方法进行了展望.关键词:智能制造;故障预测与健康管理;工业机器人;边缘计算;深度学习1引言(introduction)智能制造[1-3]作为“中国制造2025”的重点建设内容,已成为工业界热点.如何提高生产设备的可靠性及生产过程的安全性是智能制造系统着力解决的关键问题.在现今的制造系统中,存在着许多无法被决策者掌握的不确定因素,通常表现为设备的性能下降、健康衰退、零部件磨损、运行风险升高等.这些因素很难通过测量被定量化呈现,往往是工业生产中不可控的风险,会对企业生产过程造成不利影响,如机器意外停机和产品质量下降等[4].因此,智能制造系统的关注点是这些不可见因素的避免和透明化呈现.工业机器人是智能制造系统最具代表性的设备之一,其精度退化和设备故障问题[5]十分突出,给企业的安全生产和经济效益造成巨大负面影响.例如,从企业安全生产层面来看,自1978年日本的世界第一宗机器人杀人事件开始,到2018年中国“安徽一搬运机器人伤人”,频发的机器人事故一直屡见不鲜;经济效益层面,以汽车制造为例,一台工业机器人意外停机会造成整条生产线的瘫痪,进而造成平均每分钟超过2万美元的损失.由此可见,研究工业机器人的健康评估方法,对于减少企业意外损失和实现安全生产具有重要意义,也是最终构建智能制造系统的核心技术.2工业机器人组成及失效分析(compositionandfailureanalysisontheindustrialrobot)工业机器人提供作业所需的运动轨迹、动力,通过控制机器人各运动构件的运动,来实现末端执行器的位置变化以及动作.工业机器人由4大部分组成,分别是机械主体、驱动系统、感知系统、控制系统,如图1所示.(1)机械主体:机械主体是机器人的实体,由机座末端执行器、关节、机座以及连接杆件等组成.(2)驱动系统:向执行系统提供动力,通常由电力驱动,主要有伺服电机和减速器,其中减速器又分为rv(rotatevector)减速器和谐波减速器[6].(3)感知系统:感知系统把机器人各种内部状态信息和环境信息从信号转变成机器人自身或者机器人之间能够理解和应用的数据、信息[6],由内部传感器和外部传感器组成,常用的传感器有扭矩传感器、位置传感器、温度传感器、加速度传感器、压力传感器、视觉传感器等.(4)控制系统[7]:控制系统让执行系统按照规定的要求工作,是机器人的大脑,由运动控制器和驱动控制器等组成.失效模式、机理及其影响分析(failuremodes,mechanism,andeffectanalysis,fmmea)是一种系统性的方法,它使用产品寿命周期剖面信息和产品设计信息来识别产品失效机理,探寻产品的失效机理并分析其可能造成的影响,对于改进产品设计、指导加速老化测试以及进行产品剩余寿命预测等有重要意义[8].失效模式与产品的功能和性能要求密切相关,失效机理则是指引起产品最终失效的物理、电气、化学和机械应力等原因和过程以及其特定组合[9].工业机器人核心部件的失效模式、机理及其影响分析如表1所示.3现有工业机器人健康评估方法综述与分析(reviewandanalysisontheexistinghealthassessmentmethodsofindustrialrobots)3.1基于故障预测与健康管理的方法故障预测与健康管理(prognosticsandhealthmanagement,phm)技术采用先进的传感器技术获取和采集工业系统中产生的各类数据,经过信号处理和数据分析等运算手段,基于智能算法和模型实现复杂工业系统/设备健康状态的检测、分析、预测和管理[10].phm能够在实际生命周期条件下评估系统的可靠性,降低系统发生失效的风险[11].针对工业机器人的性能衰退问题,许多学者基于phm技术在组件级和系统级2个层面展开了研究工作.如图2所示,组件级phm通常侧重于监控各个组件的健康状况;系统级phm通过考虑系统架构、系统功能和与过程相关的参数来评估整个系统的运行状况[12].(1)基于组件级phm的工业机器人健康评估方法,根据健康评估过程中采集信号的种类不同,有代表性的研究包括:•基于振动信号的方法基于振动信号的方法被广泛应用于工业机器人健康监测[13-17].由于振动传感器可直接安装于工业机器人表面,而不需要对工业机器人进行拆卸,因此该方法是一种非入侵式的方法,对工业机器人的正常工作几乎不产生影响.eski等[13]提出基于振动信号的机器人关节健康评估方法,该文献用人工神经网络(径向基神经网络和自组织映射网络)来预测工业机器人的振动,根据加速度信号的漂移程度来判断健康状况.结果表明,所提出的径向基神经网络具有鲁棒稳定性,可以在规定的轨迹中分析机械手关节的加速度,从而实现健康评估.然而,该方法无法评估机器人关节的故障严重程度,也无法识别不同种类的故障模式.为此,jaber等[14]基于小波变换和人工神经网络来诊断工业机器人的关节间隙等级,借此对机器人关节故障严重程度实现评估.该文献对采集的振动信号进行小波变换;将信号分解成从高到低的多频带频率并提取特征;将提取的特征用于设计、训练和测试所提出的神经网络,最终成功区分出机器人齿隙等级.此外,jaber等又进一步对工业机器人故障溯源问题展开研究,对轴承故障[15]、齿轮故障[16]等多种故障模式实现分类.由于jaber等使用小波变换来人工提取特征,因此特征提取过程中会失去原始数据的一些信息,为此,一些学者使用深度学习方法来自动提取原始数据的高维特征.例如针对伺服电机故障检测问题,ince等[17]采用基于自适应设计的1维卷积神经网络(convolutionalneuralnetwork,cnn),可将电机故障检测的特征提取和分类阶段融合到一个学习体中,用于电机状态的实时监测.最近,wen等[18]对一定长度的时域振动信号进行随机截取并滑动,转化成一系列灰度图像,进而使用cnn进行故障诊断,这种方法有望应用到工业机器人预防性维护中[19].•基于声发射信号的方法虽然振动监测在故障诊断中取得了很好的效果,但考虑到工业机器人在非高速、噪声等多种复杂工况中运行,基于振动信号的分析难以适应多种复杂场合.工业机器人早期故障的振动信号会被车间的复杂环境所产生的噪声所淹没,导致早期故障无法有效地被检测,但对于工业机器人来说,早期故障对工业机器人产生的影响是巨大的,将导致工业机器人精度下降甚至是生产事故.而声发射信号具有高频率、故障特征明显等优势,基于声发射的分析比振动分析能够更有效地检测出早期故障并能够评估故障严重程度[20].徐龙飞[21]提出了基于声发射信号的工业机器人rv减速器故障诊断及识别方法,利用时域与频域特征求解多组故障类型信号特征向量,并通过k均值聚类方法对这些向量进行聚类研究,实现减速器故障诊断与识别.但是该文献只是对现有k均值算法和bp(反向传播)神经网络的应用,且由于实验数据量少,因此聚类效果未能达到预期目标.而安海博等[22]提出的基于声发射信号的rv减速器退化监测方法,通过分析并提取退化过程中声发射信号的故障特征,找出了rv减速器退化过程中声发射信号的变化规律.该方法是一种监测rv减速器健康状态的新尝试.但是基于声发射信号的健康监测方式也具有一定的缺点,声发射信号是由于应力变化而产生的应力波,比如部件磨损等,因而并不适用于非应力损伤故障;此外,声发射信号时域数据量相比振动信号更大,不易处理.•基于电流信号的方法基于振动和声发射信号的健康评估方法,对传感器的安装位置非常敏感,容易受到外界因素干扰[23],例如,工业机器人运动过程中所产生的运动加速度会对振动信号的采集带来干扰,进而影响评估结果.与基于振动和声发射信号的方法相比,基于电流信号的方法不易受到外界干扰,其基本思想为:当工业机器人出现机械故障时,机器人的关节电机电流会包含具有频率和幅值调制的故障信息[24].目前,基于电流的方法已在故障诊断领域受到越来越多的关注[25-27].针对工业机器人齿轮磨损,cheng等[24]利用电流信号提出了基于高斯混合模型的工业机器人无监督故障检测框架:首先,对原始的电流信号进行预处理;然后,提取对运动不敏感的故障特征;最后,基于混合高斯模型进行无监督学习,来实现故障检测.但是,该方法只能够实现齿轮异常检测,尚无法评估齿轮磨损程度.•基于扭矩信号的方法基于扭矩信号进行工业机器人故障检测具有非入侵性的优点[28],扭矩值可通过读取机器人控制器获取.针对机器人关节磨损问题,bittencourt等[29]提出了一种以循环方式运行的方法来监控机器人关节,其基本思想是在健康状态下,重复操作下的不同批次的数据具有相似性.因此,将监测数据与标准批次数据进行比较即可实现异常检测.作者使用kullback-leibler散度来度量样本数据分布的变化,然而,该方法易受到机器人负载以及环境温度变化的影响,因此方法的鲁棒性有待提高.(2)基于系统级phm的工业机器人健康评估方法,有代表性的研究包括:borgi等[30]提出了一种数据驱动的精度误差检测方法,用于工业机器人的预测性维护.borgi等从“机器人的精度误差与测量的电信号中的某些模式之间存在相关性”的基本思想出发,建立多元回归模型来描述从工业机器人控制器中的三相电流数据中提取的特征与机器人的精度误差之间的关系,证明了利用电流时间序列数据分析和建立机器人机械臂精度误差的高可行性.hornung等[31]提出一种机器人异常检测系统(rads),它可以处理没有或很少出现异常信息的大量数据(关节扭矩、电动机扭矩、电流、接头温度和施加的负载等).hornung等使用2种方法来生成2类标记数据(正常数据和未知数据),利用马氏距离通过聚类表示正常行为的数据,使用ns(否定选择)来聚类未知数据(未知数据是指隐藏在数据空间的未知区域,表示机器人的异常行为).标记过数据之后,使用支持向量机(svm)分离故障,与此同时,为了提高效率,使用了降维技术.以nist(美国国家标准与技术研究院)的qiao等[12,32]为代表的研究者,提出了工业机器人整机phm的技术路线,把工业机器人phm分为4个层次:(1)控制层感知和分析:采集机器人控制器、内嵌传感器数据进行分析;(2)环境层感知和分析:采集设计数据(例如机器人正在运行的程序)、过程数据、系统集成控制数据和外部plc(可编程逻辑控制器)数据等工作环境数据进行分析;(3)附加层感知和分析:采集外加传感器数据,如加装力和扭矩传感器获得子部件有效载荷和工具安装的影响;(4)顶层(系统层)感知和分析:结合视觉进行位置识别,考虑系统架构、系统功能以及相关参数评估整体系统的健康状态.这种方法采取分层建模的方式,一旦在顶层(系统层)上检测到机器人精度降低,就采用数据融合技术分析其他3层的数据,借此实现工业机器人整机健康监测[33].3.2基于群组聚类与对等比较的方法尽管上述基于phm的方法在组件和系统层面上实现了工业机器人健康评估,但是,由于工业机器人种类繁多且运行工况复杂,在实际工程实践中难以构建统一的模型对不同种类的工业机器人或者对同一个机器人在不同工况下进行健康状态评估.此外,上述方法往往需要外加传感器以及足够的训练数据来构建模型,因此需要较大的运算资源.为此,美国辛辛那提大学ims(美国智能维护)中心的lapira[28]提出了基于群组聚类和对等比较的工业机器人健康评估方法,该方法能够在占用较少计算资源的情况下实时地完成工业机器人健康监测.该方法的基本思想为:首先,把群组内的工业机器人进行相似性聚类,把功能及工况类似的机器放到一个集群内;其次,通过比较每个工业机器人与集群的差异性来判断其健康程度.方法的具体实现如图3所示[28].第1步是群组聚类:依据与机器相似性相关的变量(如工况、电机齿轮比、负载率和压力校准等)进行聚类,其中聚类技术可采用k均值聚类算法、基于密度的聚类算法(如density-basedspatialclusteringofapplicationswithnoise,dbscan)、基于模型的聚类算法(如expectation-maximization,em)等多种算法进行集成聚类,并使用霍普金斯统计量进行聚类趋势检验,来评估进行聚类的可行性.第2步是本地集群故障检测:通过组内机器进行对等比较(采用扭矩、电流等特征),进行健康值的计算,其中对健康值的评估可采用欧氏距离、pca-t2(principalcomponentsanalysis-t2statistic)预测、som-mqe(selforganizingmap-minimumquantificationerror)技术等方法,或者集成使用多种方法来获取更好的结果.然而实际生产中,受环境和运行条件影响,设备的工作环境与工况动态改变,所以聚类过程需要具备动态自调整功能以适应这种改变.jin等[34]提出一种动态群组聚类方法,整个群组能够适应工作条件的变化,随着不断变化的环境进行调整.通过历史特征空间,对集群内相似度进行评估,建立最小相似度阈值,用实时特征空间下的相似度评估值与阈值进行比较,若大于阈值则更新聚类.基于群组聚类和对等比较的工业机器人健康评估方法的缺陷在于:受聚类的限制,当无法完成聚类时,无法实现此方法;其次,如果聚类后某个集群里单元数目过少,将无法获得正确或有效的结果;最后,这种方法只是从相似度的角度发现异常的机器,并没有进行失效根本原因分析,所以还要进一步核查原因,进行更加细粒度的健康评估.4未来发展趋势探讨:基于边-云协同与深度学习的工业机器人健康评估方法(futuredevelopmenttrends:industrialrobothealthassessmentbasedonedgecloudcollaborationanddeeplearning)4.1体系结构层面:基于边-云协同的工业机器人健康评估体系由第3节的讨论可知,基于群组聚类与对等比较的方法和基于phm的方法是能用于工业机器人健康评估的2类主要方法,其基本思想、优缺点对比和技术难点等总结如表2所示.基于群组聚类与对等比较的方法需要的计算资源少,实时性好,该方法凭借算法简单、经济成本低等优势,现已被成功应用于企业;基于phm的方法则能够实现更加细粒度的健康评估,但是需要较多的资源,由于计算成本高,实施困难,目前仍处于研发阶段.本文提出了融合2种方法优势的机器人健康评估方法,如图4所示,先使用基于群组聚类与对等比较的方法发现异常机器,再使用基于组件/系统级phm的方法对异常机器作进一步细粒度健康评估.针对组件级phm方法,对工业机器人的关键部件如减速器、电机、关节等部署振动传感器或声发射传感器,基于智能算法来实施针对性的评估;针对于系统级phm方法,不再仅仅专注于组件,而是要评估整机的健康状态,从控制器、内置传感器、附加传感器、外部plc等来获取多源信息,对机器人进行深度健康评估.边-云协同[35]的模式刚好契合了此方法.云计算[36]擅长全局性、非实时、长周期的大数据处理与分析,能够长周期维护;边缘计算[37]更适用局部性、实时、短周期数据的处理与分析,能更好地支撑本地业务的实时智能化决策执行[38].通过边-云协同,在边缘计算层,通过基于群组聚类与对等比较的方法进行实时评估,发现异常机器;在云计算层,利用云计算的强大计算能力,通过phm方法在组件级和系统级对异常机器进行细粒度评估.二者是互补协同关系,边缘计算靠近执行单元,花费较少的资源开销,实施的是实时的数据处理、算法运算,而云计算将进行更高质量、更长周期、更大规模的数据运算.综上,所提出的工业机器人健康评估的边缘计算架构包括3层:现场层、边缘层、云计算层,如图5所示.(1)现场层:该层连接工业机器人的控制器、各种传感器(如扭矩、视觉、温度、振动等)、系统集成控制、plc等现场节点.这些现场节点通过现场总线/工业以太网和边缘层的边缘网关相连,实现连通.其中tsn(时间敏感网络)与opcua(opc统一架构)的结合是重要支撑,利用opcua技术能够实现从工业现场设备到高级控制层的纵向信息集成[39],tsn解决周期性数据和非周期性数据的统一网络传输问题.tsn与opcua的结合[40]意味着工业机器人的多个传感器数据、控制器数据、环境数据能够实时进行传输,为工业机器人健康评估提供一个实时、高可靠的通信网络.(2)边缘层:在接收到来自现场层的数据之后,对工业机器人进行实时数据分析、状态感知、快速的健康评估等.边缘层包括边缘节点和边缘管理器2个主要部分:边缘节点为硬件,包括边缘网关、边缘云、边缘控制器等计算存储设备和时间敏感网络交换机等网络设备;边缘管理器为软件,提供业务编排和直接调用能力[38].通过边缘节点实现基于群组聚类和对等比较的健康评估,发现异常机器,利用以太网把异常机器的控制器数据、传感器数据、环境数据传给云计算层.(3)云计算层:该层从边缘层获得异常机器的详细数据后,结合云服务器强大的计算能力,利用深度神经网络、生成式对抗网络(gan)、迁移学习等技术,对异常机器进行深度数据分析,借此实现工业机器人关键组件和整机健康状况评估;与此同时,向现场层发出信息,为用户提供健康管理、故障溯源、视情维修以及备件预测等精准服务.引入边-云协同技术,在边缘层,能够实时地分析工业机器人的数据,发现异常机器;在云计算层,针对异常机器实现细粒度分析,有效提升了云端资源利用率,最终使工业机器人具有健康状态“自我感知”能力.4.2算法层面:深度学习前沿技术的运用目前随着人工智能技术的不断发展,越来越多的人工智能技术开始应用到工业领域,例如,迁移学习、gan等.(1)迁移学习[41-42]作为近几年新兴起来的技术,也逐渐开始应用到phm领域.工业机器人种类繁多,工况任务不一,对于不同的机器人需要建立不同的模型.通过引入迁移学习,可以解决这种由于任务改变而带来的误判,把原来训练的模型迁移到新的机器人上,不必重新训练模型.mahyari[43]提出了机器人故障诊断系统中的域自适应[44-45](domainadaptation),使用域自适应,即迁移学习和知识迁移作为中间步骤,以避免每次机器人的任务改变时对模型进行再训练.其基本思想为:在机器人健康并且执行任务a的同时收集训练数据(训练数据在源域中),在机器人执行任务b时收集测试数据(测试数据在目标域中),利用域自适应算法将从训练和测试数据中提取的特征投影到公共子空间,对测试数据与公共子空间中的健康数据进行比较以识别异常.由此可见,在工业机器人健康评估中,迁移学习具有很大的研究空间.(2)gan[46]是近几年深度学习中一个比较热门的研究方向,是用对抗方法来生成数据的一种模型.对于工业机器人phm来说,引入gan主要有3点用途:(1)扩充故障样本[47-48].对于工业机器人来说,故障样本相比正常数据是十分有限的,通过gan扩充样本来解决样本不平衡问题,是一种有效的方法.cao等[49]最早提出利用gan结合卷积神经网络进行故障诊断,未来将gan引入工业机器人故障诊断中具有很大潜力.(2)异常值检测.目前gan已经应用到异常检测[50-51]中.在对工业机器人健康评估过程中,可能异常的数据仅仅占总数据的很小一部分,使用gan进行异常值检测,为进一步故障诊断做准备,将会是一个很好的方法.(3)半监督学习.在对工业机器人进行健康评估时,需要采集大量数据,标记样本将是很大的工作量或存在大量无标签样本.利用gan进行半监督学习,在只有少量标记样本的情况下进行工业机器人故障诊断,将十分具有实际意义.目前这种方法已应用到工业故障诊断领域中[52].5结论(conclusion)本文针对工业机器人精度退化和设备故障突出的问题,对工业机器人展开了失效模式及影响分析,并综述了现有的工业机器人健康评估方法;在此基础上,提出了基于“边-云协同架构”的工业机器人健康评估方法:在边缘端利用基于群组聚类和对等比较的方法进行异常检测,在云端则利用深度学习算法对发生异常的机器人进行细粒度健康评估,为实现智能工厂机器人设备健康状态的“透明化呈现”奠定基础.未来,如何借助工业通信及管理外壳技术将智能工厂内不同品牌工业机器人的健康信息实时传输至工厂信息物理计算平台,为智能工厂设备调度与维护提供最优决策指导,是所要关注的方向.