基于petri网的数控机床智能制造工厂调度模型与分析摘要:以petri理论为基础,定义数控机床智能制造工厂通用实体的模板类,再分析工艺流程得出零件物流加工过程的信息流图。
以信息流图为基础对模板类进行组装。
完成数控机床智能制造工厂调度模型的建模。
对模型结合实际生产线进行实验优化。
关键词:petri;fms;生产线;管理系统柔性生产线就是典型的离散并行系统,petri网对于离散并行系统的建模分析起着至关重要的作用[1]。
petri网是一种信息的网状模型,以条件和事件为节点的有向二分图基础上添加状态信息的托肯分布,并按一定规则进行事件驱动状态演变,从而仿真出柔性生产的运行状态。
目前针对单生产线的基于petri网理论调度的研究较多[2-3],实际产品的加工往往由多条生产线协调完成。
各个实体运行状态多、状态间变迁复杂,导致基于petri网的生产线模型庞大无法继续进行下一步分析,从而造成petri网用于智能工厂建模及调度的主要问题之一是模型节点多[4]。
在实际生产中,整个工厂甚至某条生产线需要加工不同零件或完成相似零件不同工艺,导致生产加工的效率优化难以得到满足,加工设备和物流往往不是同时达到最大负荷,求最优是优先满足负荷最大原则。
智能工厂对于生产时间敏感性的解是对于加工时间和物流转运时间求最优解。
petri有高度的灵活性及扩展性,其应用范围现有面向对象petri网[5]、有色petri网[6]、赋时petri网[7]和分层petri网[4]等。
由于petri网是一种网状模型,其扩展性及延伸性强,例如有色petri网、赋时petri网、基于面向对象的赋时着色petri网。
[8]有色petri网(coloredpetrinet,cpn)对相似节点进行合并,用节点属性进行区分,同时对不同属性赋以颜色。
有色petri网相比于petri网模型规模进行简化,但分析数据量及过程未简化。
赋时petri网对petri网模型增加延时变迁及库所状态。
基于面向对象的赋时着色petri网[7](oocptn)以面向对象的思维方式将fms系统分为5类对象类子网,通过物流和信息流将对象类子网链接在一起。
但是对象子网状态信息不全与实际加工匹配,且相似子网也存在各自所特有的信息。
[9]综上所述,本文提出了基于petri网的智能工厂的调度模型,智能工厂的调度模型以实体类模板的赋时petri网为基础,结合工艺路线进行组装形成最终的智能工厂模型,解决了设备多、状态多以及资源多等导致的节点复杂无法进行下一步研究,以及根据工艺、零件不同优先满足负荷最大的物流、切削工具和装配设备的问题。
1基于petri网的智能工厂调度模型1.1通用实体的模板类定义智能工厂常用实体有机床、机器人、物流小车、托盘库和缓存台等设备。
实体的各种状态集合组成库所集p,库所集之间的转化集合为变迁集t,再使用有向弧f进行连接,综上petri网由三元组n=(p,t,f)组成的有向网。
具有相似属性的实体(或者资源)所共同包含的库所、变迁及有向弧封装成一个类模板。
每个实体模型通过继承模板类的基础上添加实体独有库所及变迁,形成实体模型。
fms系统中的通用实体的模板类模型主要包括机床petri模型、机器人搬运全过程模型、物流小车搬运全过程模型、托盘和缓存台全过程模型等4种。
1.1.1机床petri模型在机床模板类中,机床状态有正在加工、等待加工、预定状态、关机(或故障状态)、等待下料和等待上料6种库所,以及异常变化、加工完成、下料请求、上料请求、请求加工、预定零件和恢复正常7种变迁,库所及变迁关系如图1所示。
1.1.2机器人搬运全过程模型在机器人类模板中,机器人状态有异常、上料、下料、等待和预定5种状态,以及异常变化、下料请求、上料或者下料完成、上料请求、预定零件、预定上料和恢复正常7种变迁,库所和变迁关系如图2所示。
1.1.3物流小车搬运全过程模型在物流小车类模板中,物流小车状态有异常状态、运输、等待和预定运输4种库所,以及异常变化、运输请求、运输完成、预定运输和恢复正常5种变迁。
库所和变迁关系如图3所示。
1.1.4托盘和缓存台全过程模型在托盘和缓存台类模板中,托盘或缓存台状态有异常、缓存(托盘占用)、空和预定缓存(预定托盘)4种库所,以及异常变化、缓存请求(托盘请求)、缓存完成(托盘完成)、预定缓存(预定托盘)和恢复正常5种变迁。
库所和变迁关系如图4所示。
1.2通用实体模板类组装以零件的信息流为基础进行组装上述模板类。
零件的信息流图如图5所示,信息流展示零件加工过程的生命周期。
以信息流为模板类的组装流程,可以根据工艺流程任意组装多台机床、多个机器人以及多物2案例分析———某数控机床智能工厂调度模型2.1数控机床智能工厂布局柔性制造系统可分为控制决策层、抽象层和物理层。
决策层是系统的核心所在,对物流层的映射抽象层起着推理、验算、决策的关键作用。
以某企业数控机床智能工厂为目标定制fms柔性生产线。
加工对象为数控机床的滑鞍、立柱、床身。
智能工厂整体布局如图6所示,包含6台龙门加工中心、3台动柱式刨台加工中心、6个缓存工位、6个仓库工位、1条rgv物流小车和1条交换小车。
为方便研究,把图示智能工厂分为3个单元,每个单元包括2台龙门加工中心、1台动柱式刨台加工中心以及2个缓存工位,3个单元共用输出物流以及交换小车。
数控机床的滑鞍、立柱、床身的加工工艺如图7所示。
注意事项如下:(1)零件由人工装夹在托盘上的夹具上。
(2)零件加工完成后,由输出物流输出,人工取下零件后,托盘和夹具由输出物流及交换小车运回上料仓库。
(3)托盘编号、夹具编号、零件编号需一一对应才能加工。
2.2根据智能工厂模板类进行组装数控机床智能工厂模型以工艺流程为基础得出数控机床智能工厂模型信息流图。
然后再以模板类为基础生成智能工厂的模型。
为方便查看,简化各实体模板类内部模型,信息流图加上模板类模型如图8所示。
以粗加工为例,模型组装完成后的详细模型如图9所示,分为机床1、机床2、交换小车和缓存4个派生类。
下面对派生类及时间属性进行详细说明:(1)在实际生产过程中,设备故障报警等异常,需人为清除,作为时间统计。
为简化模型方便分析在此图进行省略。
实际派生类真实存在。
(2)机床及物流附加时间属性。
fms系统根据工艺、机械结构等原因有部分时间不可变,且无法通过算法等方法进行优化,因此部分模型附加时间属性。
fms系统的有效可变总时间ttotal由机床辅助时间和物流时间组成,其中物流时间又包括机器人动作时间和交换小车时间。
因此有效可变总时间ttotal可用式(1)表示。
ttotal=σ(ti[machine_tool]+ti(robot)+ti(exchange_car))(1)式中:i为模型序号;ti(machine_tool)为机床辅助时间;ti(robot)为机器人物流时间;ti(exchange_car)为交换小车物流时间。
ti(machine_tool)、ti(robot)和ti(exchange_car)可分别由式(2)~(4)计算。
ti(machine_tool)=ti[condition2]-ti[condition1](2)ti(robot)=ti[condition4]-ti[condition3](3)ti(exchange_car)=ti[condition6]-ti[condition5](4)式(2)~(4)中:ti[condition1]~ti[condition6]分别为模型的起始时间。
3数控机床智能工厂调度模型分析智能工厂调度模型展示的智能工厂调度的静态逻辑。
利用数控机床智能工厂加工生产进行验证及动态特性分析。
模板类的资源、变迁使用c++代码实现。
门变迁的激发需要设备的通信接口读取设备的状态,通过状态的改变相应的变迁也改变。
本例中共用交换小车作为物流的主要设备,当多个对象同时竞争交换小车,系统会发生不可预知错误。
现可采用acdi规则进行避免。
同时提高变迁的灵活性。
通过上述方法进行实验调整模型后,使用智能工厂调度模型能有效提高工厂的加工产量。
如图10和图11分别为使用数控机床智能工厂调度模型的月产量和历史产量。
对比历史产量与调度模型优化后的产量可知,优化后的当天产量和月产量分别增加了8.3%和9.5%。
4结语以petri网为基础的模板类能够快速方便地组建数控机床智能制造工厂调度模型,同时还能根据不同的工艺、物流等特点增添属性。
数控机床智能制造工厂调度模型可以为后续的物流方式、物流路径、工艺优化提供理论指导。
同时能够避免同时请求相同资源的逻辑冲突。
